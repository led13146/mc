<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正在跳转至浏览器...</title>
    <script>
        // 检测是否在QQ或微信内置环境中
        function isWechatOrQQ() {
            const ua = navigator.userAgent.toLowerCase();
            // 微信特征：包含MicroMessenger
            const isWechat = ua.includes('micromessenger');
            // QQ特征：包含qqbrowser、mqqbrowser或qq/
            const isQQ = ua.includes('qqbrowser') || ua.includes('mqqbrowser') || ua.includes('qq/');
            return isWechat || isQQ;
        }

        window.onload = function() {
            // 替换为你的目标链接（例如下载页、功能页等）
            const targetUrl = "mc.html";

            // 核心跳转函数：唤起系统默认浏览器
            function openInDefaultBrowser(url) {
                // 微信环境特殊处理：尝试通过隐藏a标签触发外部跳转
                if (navigator.userAgent.toLowerCase().includes('micromessenger')) {
                    // 创建备用链接（微信中可能需要用户手动点击）
                    const a = document.createElement('a');
                    a.href = url;
                    a.target = '_blank';
                    a.style = 'display:none';
                    document.body.appendChild(a);
                    a.click();
                    // 提示用户手动操作（微信限制较严，可能需要引导）
                    document.querySelector('.tips').textContent = '微信中请点击下方链接，选择"在浏览器中打开"';
                } 
                // QQ环境处理：优先调用QQ内置API
                else if (navigator.userAgent.toLowerCase().includes('qqbrowser') || navigator.userAgent.toLowerCase().includes('mqqbrowser')) {
                    if (typeof qq !== 'undefined' && qq.invoke) {
                        qq.invoke("openUrl", url); // QQ客户端API直接唤起浏览器
                    } else {
                        window.location.href = url; // 备用方案
                    }
                }
                // 通用跳转：直接刷新当前页跳转
                window.location.href = url;

                // 2秒后显示手动备用链接（防止自动跳转失败）
                setTimeout(() => {
                    const manualLink = document.createElement('a');
                    manualLink.href = url;
                    manualLink.textContent = "点击手动在浏览器中打开";
                    manualLink.style = "display: block; margin: 20px auto; color: #007bff; text-decoration: underline; font-size: 16px;";
                    document.body.appendChild(manualLink);
                }, 2000);
            }

            // 执行跳转逻辑
            if (isWechatOrQQ()) {
                // 在微信/QQ中强制跳转至默认浏览器
                openInDefaultBrowser(targetUrl);
            } else {
                // 非受限环境直接跳转
                window.location.href = targetUrl;
            }
        };
    </script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: system-ui, -apple-system, sans-serif;
            text-align: center;
            color: #333;
            background: #f5f5f5;
        }
        .loading {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .tips {
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="loading">正在唤起浏览器，请稍候...</div>
    <div class="tips">若长时间无反应，请等待备用链接</div>
</body>
</html>